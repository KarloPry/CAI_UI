<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,600,0,0"
    />
    <title>Signin Page</title>
    <script defer>
      let name, email, password;
      function setName(event) {
        name = event.target.value;
        console.log(name);
      }
      function setMail(event) {
        email = event.target.value;
        console.log(email);
      }
      function setPassword(event) {
        password = event.target.value;
        console.log(password);
      }
      async function submitHandler(event) {
        event.preventDefault();
        try {
          const response = await fetch(
            "http://localhost:5000/api/auth/signup",
            {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({
                name: name,
                email: email,
                password: password,
              }),
            }
          );
          let data = await response.json()
            if(response.ok){
                localStorage.setItem('token', data.data);
                localStorage.setItem('userSession', data.user);
            }
        } catch (error) {
          console.error(error);
          // handle the error here
        }
      }
    </script>
  </head>

  <body>
    <div class="login-card-container">
      <div class="login-card">
        <div class="login-card-logo">
          <img src="./assets/Logo.svg" alt="" />
        </div>
        <div class="login-card-header">
          <h1>Registro</h1>
        </div>
        <form class="login-card-form" onsubmit="submitHandler(event)">
          <div class="form-item">
            <span class="form-item-icon material-symbols-rounded">person</span>
            <input
              type="text"
              placeholder="Usuario"
              id="userForm"
              required
              onchange="setName(event)"
            />
          </div>
          <div class="form-item">
            <span class="form-item-icon material-symbols-rounded">mail</span>
            <input
              type="text"
              placeholder="Correo"
              id="emailForm"
              autofocus
              required
              onchange="setMail(event)"
            />
          </div>
          <div class="form-item">
            <span class="form-item-icon material-symbols-rounded">lock</span>
            <input
              type="password"
              placeholder="Contraseña"
              id="passwordForm"
              required
              onchange="setPassword(event)"
            />
          </div>
          <div class="form-item">
            <span class="form-item-icon material-symbols-rounded">lock</span>
            <input
              type="password"
              placeholder="Confirmar contraseña"
              id="confirmPasswordForm"
              required
            />
          </div>
          <button id="submit" type="submit">Registrarse</button>
        </form>
        <div class="login-card-footer">
          ¿Ya tienes cuenta? <a href="#">Iniciar sesión</a>
        </div>
      </div>
      <div class="login-card-social">
        <div>Registrarse con:</
